<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TDS Data Analyst Agent</title>
  <style>
    /* Global Reset */
    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      line-height: 1.6; color:#e2e8f0;
      background: radial-gradient(circle at top left, #0f172a, #1e293b 80%);
      min-height:100vh;
      display: flex; align-items: center; justify-content: center;
      padding: 20px;
    }

    .container {
      width:100%; max-width: 1100px;
      margin: auto;
    }

    /* Header */
    .header { text-align:center; margin-bottom:40px; }
    .header h1 {
      font-size:2.8rem; font-weight:800;
      background: linear-gradient(90deg, #6366f1, #a855f7);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom: 10px;
    }
    .header p { font-size:1.15rem; color:#cbd5e1; }

    /* Card */
    .main-card {
      background: rgba(30,41,59,0.85);
      backdrop-filter: blur(12px);
      border-radius:20px;
      box-shadow: 0 10px 35px rgba(0,0,0,.5);
      padding:35px;
      transition: all .3s ease;
    }
    .main-card:hover { transform: translateY(-3px); }

    /* Form labels */
    .form-group label {
      display:block; margin-bottom:8px;
      font-weight:600; color:#e2e8f0;
    }

    /* File Input Box */
    .file-input {
      width:100%; padding:25px;
      border:2px dashed #475569;
      border-radius:12px;
      background:#1e293b;
      cursor:pointer;
      transition:.3s ease;
      text-align:center;
      color:#94a3b8;
      font-size:15px;
      position: relative;
    }
    .file-input:hover {
      border-color:#6366f1;
      background:#334155;
      color:#f1f5f9;
    }
    .file-info {
      margin-top:12px;
      padding:12px;
      border-radius:10px;
      font-size:14px;
      color:#38bdf8;
      background: rgba(51,65,85,0.6);
      display:none;
    }

    /* Buttons */
    .button-group { display:flex; gap:15px; margin-top:25px; flex-wrap:wrap; }
    .btn {
      flex:1;
      background:linear-gradient(135deg,#6366f1 0%,#a855f7 100%);
      color:#fff; border:none;
      padding:14px 28px;
      border-radius:12px;
      font-size:16px; font-weight:600;
      cursor:pointer; transition:.25s ease;
      letter-spacing: .3px;
      text-align:center;
    }
    .btn:hover {
      transform:translateY(-2px);
      box-shadow:0 8px 20px rgba(99,102,241,.5);
    }
    .btn:disabled {
      background:#475569;
      cursor:not-allowed;
      transform:none;
      box-shadow:none;
    }
    .btn-secondary {
      background:#334155;
      color:#e2e8f0;
    }
    .btn-secondary:hover {
      background:#475569;
    }

    /* Loading spinner */
    .loading { display:none; text-align:center; padding:20px; }
    .spinner {
      border:4px solid #334155; border-top:4px solid #6366f1;
      border-radius:50%;
      width:42px; height:42px;
      animation:spin 1s linear infinite;
      margin:0 auto 15px;
    }
    @keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }

    /* Results */
    .results { display:none; margin-top:35px; }
    .results h3 {
      font-size:1.5rem;
      font-weight:700;
      margin-bottom:20px;
      color:#f1f5f9;
    }
    .result-item {
      background:#0f172a;
      border-left:4px solid #6366f1;
      padding:20px;
      margin-bottom:20px;
      border-radius:12px;
      transition:.3s ease;
    }
    .result-item:hover { transform: translateX(4px); }
    .question {
      font-weight:700;
      color:#fff;
      margin-bottom:12px;
      font-size:1.1rem;
    }
    .answer { color:#cbd5e1; line-height:1.6; }
    .answer pre {
      background:#1e293b;
      color:#f8fafc;
      padding:15px;
      border-radius:10px;
      overflow:auto;
    }
    .answer img {
      max-width:100%;
      height:auto;
      border-radius:10px;
      margin:12px 0;
      box-shadow:0 6px 16px rgba(0,0,0,.6);
      cursor:pointer;
      transition: transform .3s ease;
    }
    .answer img:hover { transform:scale(1.03); }

    /* Error */
    .error {
      background:#1e293b;
      border-left-color:#ef4444;
      color:#fca5a5;
    }

    /* Modal */
    .modal {
      display:none; position:fixed; z-index:1000;
      left:0; top:0; width:100%; height:100%;
      background:rgba(0,0,0,.9);
      display:flex; align-items:center; justify-content:center;
    }
    .modal-content {
      max-width:90%; max-height:85%;
      border-radius:14px;
      box-shadow:0 8px 30px rgba(0,0,0,.8);
    }
    .close {
      position:absolute; top:25px; right:40px;
      color:#f1f5f9;
      font-size:38px; font-weight:700;
      cursor:pointer; transition:.2s ease;
    }
    .close:hover { color:#94a3b8; }

    /* Responsive */
    @media (max-width:768px){
      .header h1{font-size:2rem}
      .main-card{padding:20px}
      .button-group{flex-direction:column}
      .btn, .btn-secondary{width:100%}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ü§ñ TDS Data Analyst Agent</h1>
      <p>Upload your questions file and optional dataset to get intelligent answers with visualizations</p>
    </div>

    <div class="main-card">
      <form id="analysisForm">
        <!-- Questions file (REQUIRED) -->
        <div class="form-group">
          <label for="questions_file">Questions File (.txt) <span style="color:#ef4444">*</span></label>
          <div class="file-input-wrapper">
            <div class="file-input" id="questionsDrop">
              <input type="file" id="questions_file" name="questions_file" accept=".txt"/>
              <span>üìÅ Click to upload your questions (.txt)</span>
            </div>
          </div>
          <div id="questionsInfo" class="file-info"></div>
        </div>

        <!-- Dataset file (OPTIONAL) -->
        <div class="form-group">
          <label for="data_file">Upload Dataset (Optional)</label>
          <div class="file-input-wrapper">
            <div class="file-input" id="dataDrop">
              <input type="file" id="data_file" name="data_file" accept=".csv,.xlsx,.xls,.json,.parquet,.txt"/>
              <span>üìÅ Click or drag & drop your dataset</span>
            </div>
          </div>
          <div id="dataInfo" class="file-info"></div>
        </div>

        <div class="button-group">
          <button type="submit" class="btn" id="submitBtn">üöÄ Analyze Data</button>
          <button type="button" class="btn btn-secondary" id="clearBtn">üóëÔ∏è Clear</button>
        </div>
      </form>

      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Analyzing your data... This may take a few moments.</p>
      </div>

      <div class="results" id="results">
        <h3>üìä Analysis Results</h3>
        <div id="resultsContent"></div>
      </div>
    </div>
  </div>

  <!-- Image Modal -->
<div id="imageModal" class="modal" style="display:none;">
  <img class="modal-content" id="modalImage" alt="Visualization" style="display:none;"/>
</div>

  <!-- keep your original JS logic unchanged -->
  <script>
    /* --- your full JS logic as before (no changes) --- */
    /* ... paste your original script here ... */
  </script>
</body>
</html>
